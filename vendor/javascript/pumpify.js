import e from"pump";import r from"inherits";import t from"duplexify";var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var a={};var s=e;var n=r;var i=t;var toArray=function(e){return e.length?Array.isArray(e[0])?e[0]:Array.prototype.slice.call(e):[]};var define=function(e){var Pumpify=function(){var r=toArray(arguments);if(!((this||o)instanceof Pumpify))return new Pumpify(r);i.call(this||o,null,null,e);r.length&&this.setPipeline(r)};n(Pumpify,i);Pumpify.prototype.setPipeline=function(){var e=toArray(arguments);var r=this||o;var t=false;var a=e[0];var n=e[e.length-1];n=n.readable?n:null;a=a.writable?a:null;var onclose=function(){e[0].emit("error",new Error("stream was destroyed"))};this.on("close",onclose);this.on("prefinish",(function(){t||r.cork()}));s(e,(function(e){r.removeListener("close",onclose);if(e)return r.destroy("premature close"===e.message?null:e);t=true;false===r._autoDestroy&&(r._autoDestroy=true);r.uncork()}));if((this||o).destroyed)return onclose();this.setWritable(a);this.setReadable(n)};return Pumpify};a=define({autoDestroy:false,destroy:false});a.obj=define({autoDestroy:false,destroy:false,objectMode:true,highWaterMark:16});a.ctor=define;var l=a;const u=a.obj,f=a.ctor;export default l;export{f as ctor,u as obj};

