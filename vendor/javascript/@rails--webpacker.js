import*as e from"path";import*as s from"fs";import*as t from"glob";import*as n from"path-complete-extname";import*as o from"webpack";import*as a from"mini-css-extract-plugin";import*as r from"webpack-assets-manifest";import*as i from"case-sensitive-paths-webpack-plugin";import*as c from"pnp-webpack-plugin";import{_ as l,a as u}from"../_/ff50592a.js";import p from"./config_types/index.js";import d from"./config.js";import{_ as m}from"../_/f289f03c.js";import f from"./utils/get_style_rule.js";import*as v from"sass";import h from"process";import"flatted";import"./config_types/config_list.js";import"js-yaml";var _="default"in e?e.default:e;var b="default"in s?s.default:s;var g={};const{resolve:j}=_;const{realpathSync:w}=b;const{source_path:k,additional_paths:y}=d;const{nodeEnv:x}=m;g={test:/\.(js|jsx|mjs|ts|tsx)?(\.erb)?$/,include:[k,...y].map((e=>{try{return w(e)}catch(s){return j(e)}})),exclude:/node_modules/,use:[{loader:"babel-loader",options:{cacheDirectory:true,cacheCompression:"production"===x,compact:"production"===x}}]};var E=g;var $="default"in e?e.default:e;var C={};const{join:O,normalize:P}=$;const{source_path:M,static_assets_extensions:S}=d;C={test:new RegExp(`(${S.join("|")})$`,"i"),use:[{loader:"file-loader",options:{name(e){return e.includes(P(M))?"media/[path][name]-[hash].[ext]":"media/[folder]/[name]-[hash:8].[ext]"},esModule:false,context:O(M)}}]};var D=C;var R={};const L=f;R=L(/\.(css)$/i);var N=R;var U="default"in v?v.default:v;var F={};const A=f;const{additional_paths:B}=d;F=A(/\.(scss|sass)(\.erb)?$/i,false,[{loader:"sass-loader",options:{sourceMap:true,implementation:U,sassOptions:{includePaths:B}}}]);var W=F;var q={};const z=f;q=z(/\.(css)$/i,true);var T=q;var V={};const I=f;V=I(/\.(scss|sass)$/i,true,[{loader:"sass-loader",options:{sourceMap:true}}]);var J=V;var K={};const{nodeEnv:G}=m;K={test:/\.(js|mjs)$/,include:/node_modules/,exclude:/(?:@?babel(?:\/|\\{1,2}|-).+)|regenerator-runtime|core-js|^webpack$|^webpack-assets-manifest$|^webpack-cli$|^webpack-sources$|^@rails\/webpacker$/,use:[{loader:"babel-loader",options:{babelrc:false,presets:[["@babel/preset-env",{modules:false}]],cacheDirectory:true,cacheCompression:"production"===G,compact:false,sourceMaps:false}}]};var H=K;var Q={};const X=E;const Y=D;const Z=N;const ee=W;const se=T;const te=J;const ne=H;Q={file:Y,css:Z,sass:ee,moduleCss:se,moduleSass:te,nodeModules:ne,babel:X};var oe=Q;var ae="default"in e?e.default:e;var re="default"in t?t.default:t;var ie="default"in n?n.default:n;var ce="default"in o?o.default:o;var le="default"in a?a.default:a;var ue="default"in r?r.default:r;var pe="default"in i?i.default:i;var de="default"in c?c.default:c;var me={};var fe={exports:me};var ve=h;const{basename:he,dirname:_e,join:be,relative:ge,resolve:je}=ae;const{sync:we}=re;const ke=ie;const ye=ce;const xe=le;const Ee=ue;const $e=pe;const Ce=de;const{isNotObject:Oe,prettyPrint:Pe}=l;const Me=u;const{ConfigList:Se,ConfigObject:De}=p;const Re=oe;const Le=d;const getLoaderList=()=>{const e=new Se;Object.keys(Re).forEach((s=>e.append(s,Re[s])));return e};const getPluginList=()=>{const e=new Se;e.append("Environment",new ye.EnvironmentPlugin(ve.env));e.append("CaseSensitivePaths",new $e);e.append("MiniCssExtract",new xe({filename:"css/[name]-[contenthash:8].css",chunkFilename:"css/[name]-[contenthash:8].chunk.css"}));e.append("Manifest",new Ee({entrypoints:true,writeToDisk:true,publicPath:Le.publicPathWithoutCDN}));return e};const getExtensionsGlob=()=>{const{extensions:e}=Le;return 1===e.length?`**/*${e[0]}`:`**/*{${e.join(",")}}`};const getEntryObject=()=>{const e=new De;const s=getExtensionsGlob();const t=be(Le.source_path,Le.source_entry_path);const n=we(be(t,s));n.forEach((s=>{const n=ge(be(t),_e(s));const o=be(n,he(s,ke(s)));let a=je(s);let r=e.get(o);if(r){r=Array.isArray(r)?r:[r];r.push(a);a=r}e.set(o,a)}));return e};const getModulePaths=()=>{const e=new Se;e.append("source",je(Le.source_path));Le.additional_paths&&Le.additional_paths.forEach((s=>e.append(s,je(s))));e.append("node_modules","node_modules");return e};const getBaseConfig=()=>new De({mode:"production",output:{filename:"js/[name]-[contenthash].js",chunkFilename:"js/[name]-[contenthash].chunk.js",hotUpdateChunkFilename:"js/[id]-[hash].hot-update.js",path:Le.outputPath,publicPath:Le.publicPath},resolve:{extensions:Le.extensions,plugins:[Ce]},resolveLoader:{modules:["node_modules"],plugins:[Ce.moduleLoader(fe)]},node:{dgram:"empty",fs:"empty",net:"empty",tls:"empty",child_process:"empty"}});fe.exports=class Base{constructor(){this.loaders=getLoaderList();this.plugins=getPluginList();this.config=getBaseConfig();this.entry=getEntryObject();this.resolvedModules=getModulePaths()}splitChunks(e=null){let s={};const t={optimization:{splitChunks:{chunks:"all",name:true},runtimeChunk:true}};if(e){s=e(t);if(Oe(s))throw new Error(`\n          ${Pe(s)} is not a valid splitChunks configuration.\n          See https://webpack.js.org/plugins/split-chunks-plugin/#configuration\n        `)}return this.config.merge(Me(t,s))}toWebpackConfig(){return this.config.merge({entry:this.entry.toObject(),module:{strictExportPresence:true,rules:this.loaders.values()},plugins:this.plugins.values(),resolve:{modules:this.resolvedModules.values()}})}};var Ne=fe.exports;var Ue={};var Fe=h;const{isBoolean:Ae}=l;const Be=d;const fetch=e=>{const s=Fe.env[e];return Ae(s)?JSON.parse(s):s};const We=Be.dev_server;if(We){const e=Be.dev_server.env_prefix||"WEBPACKER_DEV_SERVER";Object.keys(We).forEach((s=>{const t=fetch(`${e}_${s.toUpperCase()}`);void 0!==t&&(We[s]=t)}))}Ue=We||{};var qe=Ue;var ze="default"in e?e.default:e;var Te="default"in s?s.default:s;var Ve={};function _nullRequire(e){var s=new Error("Cannot find module '"+e+"'");s.code="MODULE_NOT_FOUND";throw s}const{resolve:Ie}=ze;const{existsSync:Je}=Te;const Ke=Ne;const Ge=oe;const He=d;const Qe=qe;const{nodeEnv:Xe}=m;const createEnvironment=()=>{const e=Ie(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname,"environments",`${Xe}.js`);const s=Je(e)?_nullRequire(e):Ke;return new s};Ve={config:He,devServer:Qe,environment:createEnvironment(),Environment:Ke,loaders:Ge};var Ye=Ve;const Ze=Ve.environment;const es=Ve.config,ss=Ve.devServer;export{es as config,Ye as default,ss as devServer,Ze as environment};

