import r from"assert";import i from"path";import n from"fs";import t from"glob";import o from"process";var e={};var f=o;e=rimraf;rimraf.sync=rimrafSync;var c=r;var a=i;var u=n;var l=void 0;try{l=t}catch(r){}var d=parseInt("666",8);var s={nosort:true,silent:true};var E=0;var m="win32"===f.platform;function defaults(r){var i=["unlink","chmod","stat","lstat","rmdir","readdir"];i.forEach((function(i){r[i]=r[i]||u[i];i+="Sync";r[i]=r[i]||u[i]}));r.maxBusyTries=r.maxBusyTries||3;r.emfileWait=r.emfileWait||1e3;false===r.glob&&(r.disableGlob=true);if(true!==r.disableGlob&&void 0===l)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");r.disableGlob=r.disableGlob||false;r.glob=r.glob||s}function rimraf(r,i,n){if("function"===typeof i){n=i;i={}}c(r,"rimraf: missing path");c.equal(typeof r,"string","rimraf: path should be a string");c.equal(typeof n,"function","rimraf: callback function required");c(i,"rimraf: invalid options argument provided");c.equal(typeof i,"object","rimraf: options should be object");defaults(i);var t=0;var o=null;var e=0;if(i.disableGlob||!l.hasMagic(r))return afterGlob(null,[r]);i.lstat(r,(function(n,t){if(!n)return afterGlob(null,[r]);l(r,i.glob,afterGlob)}));function next(r){o=o||r;0===--e&&n(o)}function afterGlob(r,o){if(r)return n(r);e=o.length;if(0===e)return n();o.forEach((function(r){rimraf_(r,i,(function CB(n){if(n){if(("EBUSY"===n.code||"ENOTEMPTY"===n.code||"EPERM"===n.code)&&t<i.maxBusyTries){t++;var o=100*t;return setTimeout((function(){rimraf_(r,i,CB)}),o)}if("EMFILE"===n.code&&E<i.emfileWait)return setTimeout((function(){rimraf_(r,i,CB)}),E++);"ENOENT"===n.code&&(n=null)}E=0;next(n)}))}))}}function rimraf_(r,i,n){c(r);c(i);c("function"===typeof n);i.lstat(r,(function(t,o){if(t&&"ENOENT"===t.code)return n(null);t&&"EPERM"===t.code&&m&&fixWinEPERM(r,i,t,n);if(o&&o.isDirectory())return rmdir(r,i,t,n);i.unlink(r,(function(t){if(t){if("ENOENT"===t.code)return n(null);if("EPERM"===t.code)return m?fixWinEPERM(r,i,t,n):rmdir(r,i,t,n);if("EISDIR"===t.code)return rmdir(r,i,t,n)}return n(t)}))}))}function fixWinEPERM(r,i,n,t){c(r);c(i);c("function"===typeof t);n&&c(n instanceof Error);i.chmod(r,d,(function(o){o?t("ENOENT"===o.code?null:n):i.stat(r,(function(o,e){o?t("ENOENT"===o.code?null:n):e.isDirectory()?rmdir(r,i,n,t):i.unlink(r,t)}))}))}function fixWinEPERMSync(r,i,n){c(r);c(i);n&&c(n instanceof Error);try{i.chmodSync(r,d)}catch(r){if("ENOENT"===r.code)return;throw n}try{var t=i.statSync(r)}catch(r){if("ENOENT"===r.code)return;throw n}t.isDirectory()?rmdirSync(r,i,n):i.unlinkSync(r)}function rmdir(r,i,n,t){c(r);c(i);n&&c(n instanceof Error);c("function"===typeof t);i.rmdir(r,(function(o){!o||"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code?o&&"ENOTDIR"===o.code?t(n):t(o):rmkids(r,i,t)}))}function rmkids(r,i,n){c(r);c(i);c("function"===typeof n);i.readdir(r,(function(t,o){if(t)return n(t);var e=o.length;if(0===e)return i.rmdir(r,n);var f;o.forEach((function(t){rimraf(a.join(r,t),i,(function(t){if(!f){if(t)return n(f=t);0===--e&&i.rmdir(r,n)}}))}))}))}function rimrafSync(r,i){i=i||{};defaults(i);c(r,"rimraf: missing path");c.equal(typeof r,"string","rimraf: path should be a string");c(i,"rimraf: missing options");c.equal(typeof i,"object","rimraf: options should be object");var n;if(i.disableGlob||!l.hasMagic(r))n=[r];else try{i.lstatSync(r);n=[r]}catch(t){n=l.sync(r,i.glob)}if(n.length)for(var t=0;t<n.length;t++){var r=n[t];try{var o=i.lstatSync(r)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&m&&fixWinEPERMSync(r,i,n)}try{o&&o.isDirectory()?rmdirSync(r,i,null):i.unlinkSync(r)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return m?fixWinEPERMSync(r,i,n):rmdirSync(r,i,n);if("EISDIR"!==n.code)throw n;rmdirSync(r,i,n)}}}function rmdirSync(r,i,n){c(r);c(i);n&&c(n instanceof Error);try{i.rmdirSync(r)}catch(t){if("ENOENT"===t.code)return;if("ENOTDIR"===t.code)throw n;"ENOTEMPTY"!==t.code&&"EEXIST"!==t.code&&"EPERM"!==t.code||rmkidsSync(r,i)}}function rmkidsSync(r,i){c(r);c(i);i.readdirSync(r).forEach((function(n){rimrafSync(a.join(r,n),i)}));var n=m?100:1;var t=0;do{var o=true;try{var e=i.rmdirSync(r,i);o=false;return e}finally{if(++t<n&&o)continue}}while(true)}var y=e;export default y;

