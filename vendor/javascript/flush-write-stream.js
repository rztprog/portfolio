import t from"readable-stream";import e from"inherits";import r from"buffer";var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var o={};var n=r.Buffer;var f=t;var a=e;var l=n.from&&n.from!==Uint8Array.from?n.from([0]):new n([0]);o=WriteStream;function WriteStream(t,e,r){if(!((this||i)instanceof WriteStream))return new WriteStream(t,e,r);if("function"===typeof t){r=e;e=t;t={}}f.Writable.call(this||i,t);(this||i).destroyed=false;(this||i)._worker=e||null;(this||i)._flush=r||null}a(WriteStream,f.Writable);WriteStream.obj=function(t,e,r){if("function"===typeof t)return WriteStream.obj(null,t,e);t||(t={});t.objectMode=true;return new WriteStream(t,e,r)};WriteStream.prototype._write=function(t,e,r){l===t?this._flush(r):this._worker(t,e,r)};WriteStream.prototype.end=function(t,e,r){if(!(this||i)._flush)return f.Writable.prototype.end.apply(this||i,arguments);if("function"===typeof t)return this.end(null,null,t);if("function"===typeof e)return this.end(t,null,e);t&&this.write(t);(this||i)._writableState.ending||this.write(l);return f.Writable.prototype.end.call(this||i,r)};WriteStream.prototype.destroy=function(t){if(!(this||i).destroyed){(this||i).destroyed=true;t&&this.emit("error",t);this.emit("close")}};var s=o;export default s;

