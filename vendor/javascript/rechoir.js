import*as r from"path";import*as e from"resolve";var n="default"in r?r.default:r;var a={};var o=n;function getLongExtension(r){if("."===r[r.length-1])return null;var e="."===r[0]?1:0;var n=r.indexOf(".",e);return n<=e?null:r.slice(n)}function getPossibleExtensions(r){var e=[r];var n=r.length;var a=1;while(a<n){var o=r.indexOf(".",a);if(o<0)break;e.push(r.slice(o));a=o+1}return e}a=function(r){var e=o.basename(r);var n=getLongExtension(e);if(n)return getPossibleExtensions(n)};var t=a;var i={};function normalizer(r){return"string"===typeof r?{module:r}:r}i=function(r){return Array.isArray(r)?r.map(normalizer):normalizer(r)};var u=i;var l="default"in e?e.default:e;var f={};function _nullRequire(r){var e=new Error("Cannot find module '"+r+"'");e.code="MODULE_NOT_FOUND";throw e}var s=l;f=function(r,e,n){var a;try{var o=s.sync(e,{basedir:r});a=_nullRequire(o);"function"===typeof n&&n(a)}catch(r){a=r}return a};var v=f;var d="default"in r?r.default:r;var c={};var m=d;var p=t;var g=u;var h=v;c.prepare=function(r,e,n,a){var o,t,i,u,l,f;var s=[];var v=true;var d=p(e);d&&d.some((function(e){t=e;o=g(r[e]);return!!o}));if(-1!==Object.keys({}).indexOf(t))return true;if(!o){if(a)return;throw new Error('No module loader found for "'+t+'".')}n||(n=m.dirname(m.resolve(e)));Array.isArray(o)||(o=[o]);for(var c in o){u=o[c];l=h(n,u.module,u.register);f=l instanceof Error?l:null;f&&(l=null);s.push({moduleName:u.module,module:l,error:f});if(!f){v=false;break}}if(v){i=new Error('Unable to use specified module loaders for "'+t+'".');i.failures=s;if(a)return i;throw i}return s};const x=c.prepare;export default c;export{x as prepare};

