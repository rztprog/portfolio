import r from"readable-stream";import t from"inherits";import n from"buffer-from";import i from"typedarray";import e from"buffer";var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var a={};var f=e.Buffer;var s=r.Writable;var u=t;var c=n;if("undefined"===typeof Uint8Array)var y=i.Uint8Array;else var y=Uint8Array;function ConcatStream(r,t){if(!((this||o)instanceof ConcatStream))return new ConcatStream(r,t);if("function"===typeof r){t=r;r={}}r||(r={});var n=r.encoding;var i=false;if(n){n=String(n).toLowerCase();"u8"!==n&&"uint8"!==n||(n="uint8array")}else i=true;s.call(this||o,{objectMode:true});(this||o).encoding=n;(this||o).shouldInferEncoding=i;t&&this.on("finish",(function(){t(this.getBody())}));(this||o).body=[]}a=ConcatStream;u(ConcatStream,s);ConcatStream.prototype._write=function(r,t,n){(this||o).body.push(r);n()};ConcatStream.prototype.inferEncoding=function(r){var t=void 0===r?(this||o).body[0]:r;return f.isBuffer(t)?"buffer":"undefined"!==typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"===typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"};ConcatStream.prototype.getBody=function(){if(!(this||o).encoding&&0===(this||o).body.length)return[];(this||o).shouldInferEncoding&&((this||o).encoding=this.inferEncoding());return"array"===(this||o).encoding?arrayConcat((this||o).body):"string"===(this||o).encoding?stringConcat((this||o).body):"buffer"===(this||o).encoding?bufferConcat((this||o).body):"uint8array"===(this||o).encoding?u8Concat((this||o).body):(this||o).body};var h=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};function isArrayish(r){return/Array\]$/.test(Object.prototype.toString.call(r))}function isBufferish(r){return"string"===typeof r||isArrayish(r)||r&&"function"===typeof r.subarray}function stringConcat(r){var t=[];var n=false;for(var i=0;i<r.length;i++){var e=r[i];"string"===typeof e||f.isBuffer(e)?t.push(e):isBufferish(e)?t.push(c(e)):t.push(c(String(e)))}if(f.isBuffer(r[0])){t=f.concat(t);t=t.toString("utf8")}else t=t.join("");return t}function bufferConcat(r){var t=[];for(var n=0;n<r.length;n++){var i=r[n];f.isBuffer(i)?t.push(i):isBufferish(i)?t.push(c(i)):t.push(c(String(i)))}return f.concat(t)}function arrayConcat(r){var t=[];for(var n=0;n<r.length;n++)t.push.apply(t,r[n]);return t}function u8Concat(r){var t=0;for(var n=0;n<r.length;n++){"string"===typeof r[n]&&(r[n]=c(r[n]));t+=r[n].length}var i=new y(t);for(var n=0,e=0;n<r.length;n++){var o=r[n];for(var a=0;a<o.length;a++)i[e++]=o[a]}return i}var g=a;export default g;

