import r from"once";import e from"end-of-stream";import t from"fs";import n from"process";var a={};var o=n;var i=r;var f=e;var u=t;var noop=function(){};var c=/^v?\.0/.test(o.version);var isFn=function(r){return"function"===typeof r};var isFS=function(r){return!!c&&(!!u&&((r instanceof(u.ReadStream||noop)||r instanceof(u.WriteStream||noop))&&isFn(r.close)))};var isRequest=function(r){return r.setHeader&&isFn(r.abort)};var destroyer=function(r,e,t,n){n=i(n);var a=false;r.on("close",(function(){a=true}));f(r,{readable:e,writable:t},(function(r){if(r)return n(r);a=true;n()}));var o=false;return function(e){if(!a&&!o){o=true;if(isFS(r))return r.close(noop);if(isRequest(r))return r.abort();if(isFn(r.destroy))return r.destroy();n(e||new Error("stream was destroyed"))}}};var call=function(r){r()};var pipe=function(r,e){return r.pipe(e)};var pump=function(){var r=Array.prototype.slice.call(arguments);var e=isFn(r[r.length-1]||noop)&&r.pop()||noop;Array.isArray(r[0])&&(r=r[0]);if(r.length<2)throw new Error("pump requires two streams per minimum");var t;var n=r.map((function(a,o){var i=o<r.length-1;var f=o>0;return destroyer(a,i,f,(function(r){t||(t=r);r&&n.forEach(call);if(!i){n.forEach(call);e(t)}}))}));return r.reduce(pipe)};a=pump;var v=a;export default v;

